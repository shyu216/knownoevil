import{u as G,f as te,g as ae,h as U,i as se,P as re,t as le,j as ie,k as E,l as q,m as oe,w as Y,n as a,p as ne,R as F,q as ue,s as ce,v as me,C as he,x as ve,y as pe,z as ge,A as de,B as ye,D as w,E as fe,F as be,G as He,H as $,I as j,J as Re}from"./app-rfv8szEs.js";const ke=["/","/master/COMP90014.html","/master/COMP90018.html","/master/COMP90042.html","/master/COMP90044.html","/master/COMP90054.html","/master/COMP90077.html","/master/COMP90084.html","/master/GEOM90008.html","/master/","/bachelor/ENGG2780.html","/bachelor/ESTR1005.html","/bachelor/ESTR1006.html","/bachelor/ESTR2004.html","/bachelor/ESTR2018.html","/bachelor/MATH1510.html","/bachelor/","/other/","/other/hackathon.html","/other/literature_review.html","/other/proposal.html","/master/COMP90084/","/master/COMP90084/quantum.html","/master/COMP90084/quantum_recources.html","/master/COMP90084/shor.html","/master/research/","/master/research/candidate_topics/","/master/research/candidate_topics/t-bc.html","/master/research/candidate_topics/t-bt.html","/master/research/candidate_topics/t-mc.html","/master/research/candidate_topics/t-mh.html","/master/research/candidate_topics/t-mr.html","/master/research/candidate_topics/t-to.html","/master/research/motionmag/","/master/research/motionmag/evm.html","/master/research/rrmonitor/","/master/research/rrmonitor/deepbreath2024.html","/master/research/rrmonitor/infant2024.html","/master/research/rrmonitor/kalmanfilter.html","/master/research/semseg/","/master/research/semseg/bisenet2018.html","/master/research/semseg/icnet2018.html","/master/research/semseg/indoor2013.html","/master/research/semseg/samurai.html","/master/research/semseg/segmentanything.html","/master/research/troubleshooting/","/master/research/troubleshooting/point_cloud.html","/master/research/troubleshooting/qtcreator.html","/master/research/troubleshooting/realsense.html","/404.html","/category/","/category/unimelb/","/category/24s2/","/category/24s1/","/category/cuhk/","/category/hackathon/","/category/skills/","/category/25s1/","/tag/","/tag/algorithm/","/tag/bioinformatics/","/tag/mobile/","/tag/programming/","/tag/artificial-intelligence/","/tag/machine-learning/","/tag/deep-learning/","/tag/natural-language-processing/","/tag/research/","/tag/planning/","/tag/reinforcement-learning/","/tag/game-theory/","/tag/data-structures/","/tag/graph-theory/","/tag/quantum-computing/","/tag/principles/","/tag/linear-algebra/","/tag/complex-numbers/","/tag/database/","/tag/mathematics/","/tag/event/","/tag/skills/","/tag/image-processing/","/tag/computer-vision/","/tag/motion-magnification/","/tag/signal-processing/","/tag/semantic-segmentation/","/tag/pose-estimation/","/article/","/star/","/timeline/"],Ce="SEARCH_PRO_QUERY_HISTORY",y=G(Ce,[]),qe=()=>{const{queryHistoryCount:s}=w,r=s>0;return{enabled:r,queryHistory:y,addQueryHistory:l=>{r&&(y.value=Array.from(new Set([l,...y.value.slice(0,s-1)])))},removeQueryHistory:l=>{y.value=[...y.value.slice(0,l),...y.value.slice(l+1)]}}},T=s=>ke[s.id]+("anchor"in s?`#${s.anchor}`:""),we="SEARCH_PRO_RESULT_HISTORY",{resultHistoryCount:I}=w,f=G(we,[]),Oe=()=>{const s=I>0;return{enabled:s,resultHistory:f,addResultHistory:r=>{if(s){const l={link:T(r),display:r.display};"header"in r&&(l.header=r.header),f.value=[l,...f.value.slice(0,I-1)]}},removeResultHistory:r=>{f.value=[...f.value.slice(0,r),...f.value.slice(r+1)]}}},Pe=s=>{const r=he(),l=U(),O=ve(),o=E(0),R=q(()=>o.value>0),p=pe([]);return ge(()=>{const{search:g,terminate:P}=de(),b=ye(c=>{const H=c.join(" "),{searchFilter:Q=v=>v,splitWord:S,suggestionsFilter:D,...d}=r.value;H?(o.value+=1,g(c.join(" "),l.value,d).then(v=>Q(v,H,l.value,O.value)).then(v=>{o.value-=1,p.value=v}).catch(v=>{console.warn(v),o.value-=1,o.value||(p.value=[])})):p.value=[]},w.searchDelay-w.suggestDelay);Y([s,l],([c])=>b(c),{immediate:!0}),fe(()=>{P()})}),{isSearching:R,results:p}};var Se=te({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(s,{emit:r}){const l=ae(),O=U(),o=se(re),{enabled:R,addQueryHistory:p,queryHistory:g,removeQueryHistory:P}=qe(),{enabled:b,resultHistory:c,addResultHistory:H,removeResultHistory:Q}=Oe(),S=R||b,D=le(s,"queries"),{results:d,isSearching:v}=Pe(D),i=ie({isQuery:!0,index:0}),m=E(0),h=E(0),L=q(()=>S&&(g.value.length>0||c.value.length>0)),x=q(()=>d.value.length>0),M=q(()=>d.value[m.value]||null),B=()=>{const{isQuery:e,index:t}=i;t===0?(i.isQuery=!e,i.index=e?c.value.length-1:g.value.length-1):i.index=t-1},z=()=>{const{isQuery:e,index:t}=i;t===(e?g.value.length-1:c.value.length-1)?(i.isQuery=!e,i.index=0):i.index=t+1},J=()=>{m.value=m.value>0?m.value-1:d.value.length-1,h.value=M.value.contents.length-1},N=()=>{m.value=m.value<d.value.length-1?m.value+1:0,h.value=0},V=()=>{h.value<M.value.contents.length-1?h.value+=1:N()},K=()=>{h.value>0?h.value-=1:J()},_=e=>e.map(t=>Re(t)?t:a(t[0],t[1])),W=e=>{if(e.type==="customField"){const t=be[e.index]||"$content",[n,C=""]=He(t)?t[O.value].split("$content"):t.split("$content");return e.display.map(u=>a("div",_([n,...u,C])))}return e.display.map(t=>a("div",_(t)))},k=()=>{m.value=0,h.value=0,r("updateQuery",""),r("close")},X=()=>R?a("ul",{class:"search-pro-result-list"},a("li",{class:"search-pro-result-list-item"},[a("div",{class:"search-pro-result-title"},o.value.queryHistory),g.value.map((e,t)=>a("div",{class:["search-pro-result-item",{active:i.isQuery&&i.index===t}],onClick:()=>{r("updateQuery",e)}},[a($,{class:"search-pro-result-type"}),a("div",{class:"search-pro-result-content"},e),a("button",{class:"search-pro-remove-icon",innerHTML:j,onClick:n=>{n.preventDefault(),n.stopPropagation(),P(t)}})]))])):null,Z=()=>b?a("ul",{class:"search-pro-result-list"},a("li",{class:"search-pro-result-list-item"},[a("div",{class:"search-pro-result-title"},o.value.resultHistory),c.value.map((e,t)=>a(F,{to:e.link,class:["search-pro-result-item",{active:!i.isQuery&&i.index===t}],onClick:()=>{k()}},()=>[a($,{class:"search-pro-result-type"}),a("div",{class:"search-pro-result-content"},[e.header?a("div",{class:"content-header"},e.header):null,a("div",e.display.map(n=>_(n)).flat())]),a("button",{class:"search-pro-remove-icon",innerHTML:j,onClick:n=>{n.preventDefault(),n.stopPropagation(),Q(t)}})]))])):null;return oe("keydown",e=>{if(s.isFocusing){if(x.value){if(e.key==="ArrowUp")K();else if(e.key==="ArrowDown")V();else if(e.key==="Enter"){const t=M.value.contents[h.value];p(s.queries.join(" ")),H(t),l.push(T(t)),k()}}else if(b){if(e.key==="ArrowUp")B();else if(e.key==="ArrowDown")z();else if(e.key==="Enter"){const{index:t}=i;i.isQuery?(r("updateQuery",g.value[t]),e.preventDefault()):(l.push(c.value[t].link),k())}}}}),Y([m,h],()=>{var e;(e=document.querySelector(".search-pro-result-list-item.active .search-pro-result-item.active"))==null||e.scrollIntoView(!1)},{flush:"post"}),()=>a("div",{class:["search-pro-result-wrapper",{empty:s.queries.length?!x.value:!L.value}],id:"search-pro-results"},s.queries.length?v.value?a(ne,{hint:o.value.searching}):x.value?a("ul",{class:"search-pro-result-list"},d.value.map(({title:e,contents:t},n)=>{const C=m.value===n;return a("li",{class:["search-pro-result-list-item",{active:C}]},[a("div",{class:"search-pro-result-title"},e||o.value.defaultTitle),t.map((u,ee)=>{const A=C&&h.value===ee;return a(F,{to:T(u),class:["search-pro-result-item",{active:A,"aria-selected":A}],onClick:()=>{p(s.queries.join(" ")),H(u),k()}},()=>[u.type==="text"?null:a(u.type==="title"?ue:u.type==="heading"?ce:me,{class:"search-pro-result-type"}),a("div",{class:"search-pro-result-content"},[u.type==="text"&&u.header?a("div",{class:"content-header"},u.header):null,a("div",W(u))])])})])})):o.value.emptyResult:S?L.value?[X(),Z()]:o.value.emptyHistory:o.value.emptyResult)}});export{Se as default};
