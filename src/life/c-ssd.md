---
title: C盘损坏修复
icon: floppy-disk
---

最近电脑开机老是要磁盘检测，太耽误事了，想看看发生了什么。

先看看c盘有什么问题：
```
C:\Windows\System32>chkdsk c:
文件系统的类型是 NTFS。
卷标是 系统。

警告! 未指定 /F 参数。
将在只读模式下运行 CHKDSK。

阶段 1: 检查基本文件系统结构...
  已处理 5361664 个文件记录。
文件验证完成。
 阶段持续时间 (文件记录验证): 26.66 秒。
  已处理 69952 个大型文件记录。
 阶段持续时间 (孤立文件记录恢复): 38.13 毫秒。
  已处理 0 个错误的文件记录。
 阶段持续时间 (文件记录检查错误): 1.07 毫秒。

阶段 2: 检查文件名链接...
  已处理 77101 个重新解析记录。
文件 260228 的索引 $I30 的索引项 133511~1.PRI 不正确。
文件 260228 的索引 $I30 的索引项 409760~1.PRI 不正确。
  已处理 6544736 个索引项。
索引验证完成。
 阶段持续时间 (索引验证): 1.38 分钟。

发现错误。CHKDSK 无法在只读模式下继续。

C:\Windows\System32>
```

去按着shift去开始里面点了重启，进到winRE，跑了`chkdsk c: /f /i /x`，似乎没问题，再跑`fsutil dirty query c:`，显示正常。但重启`wpeutil reboot`进系统，又要检查，在系统里再查，又有损坏。。。

```
C:\Windows\System32>fsutil dirty query c:
卷 - c: 已损坏

C:\Windows\System32>
```

接着用diskgenius跑坏道检测，有2000+严重，但没有损坏。

原来是winRE里面系统盘符不是c了，再跑一遍：
```

X:\Windows\System32>chkdsk d: /f /i /x
文件系统的类型是 NTFS。
卷标是 系统。

警告!  指定了 /I 参数。
运行 CHKDSK 后，驱动器可能依旧是损坏的。

阶段 1: 检查基本文件系统结构...
  已处理 5361664 个文件记录。
文件验证完成。
 阶段持续时间 (文件记录验证): 23.64 秒。
  已处理 69951 个大型文件记录。
 阶段持续时间 (孤立文件记录恢复): 20.02 毫秒。
  已处理 0 个错误的文件记录。
 阶段持续时间 (文件记录检查错误): 0.62 毫秒。

阶段 2: 检查文件名链接...
  已处理 7708385 个索引项。
正在删除文件 260228 的索引 $I30 中的索引项 133511~1.PRI。
正在删除文件 260228 的索引 $I30 中的索引项 409760~1.PRI。
索引验证完成。
 阶段持续时间 (索引验证): 2.89 分钟。
CHKDSK 正在扫描未编制索引的文件以便重新连接到其原始目录。
  已扫描到 2 个未索引文件。
  已将 0 个未编制索引的文件恢复到原始目录。
 阶段持续时间 (孤立文件重新连接): 1.75 分钟。
CHKDSK 正在恢复剩余的未索引文件。
  已将 2 个未编制索引的文件恢复到回收箱。
    回收箱位于 \found.000

 阶段持续时间 (孤立文件恢复到回收箱): 17.53 毫秒。
  已处理 77102 个重新解析记录。
 阶段持续时间 (重分析点和对象 ID 验证): 119.25 毫秒。

阶段 3: 检查安全描述符...
CHKDSK 正在压缩安全描述符流
安全描述符验证完成。
 阶段持续时间 (安全描述符验证): 157.24 毫秒。
  已处理 591611 个数据文件。
 阶段持续时间 (数据属性验证): 1.73 毫秒。
CHKDSK 正在验证 Usn 日志...
Usn 日志验证完成。
正在更正主文件表(MFT) BITMAP 属性的错误。
正在更正卷位图的错误。

Windows 已更正文件系统。
无需采取进一步操作。

总共有 1157626896 KB 磁盘空间。
3298461 个文件中有  852044576 KB。
591615 个索引    1791732 KB。
坏扇区          0 KB。
系统正在使用    5493108 KB。
日志文件占用了      65536 KB。
磁盘上  298297480 KB 可用。

每个分配单元中有       4096 字节。
磁盘上共有  289406724 个分配单元。
磁盘上有   74574370 个可用的分配单元。
总持续时间: 5.08 分钟 (304877 毫秒)。
无法获得事件日志的句柄。

```

太好了，现在似乎好了：
```
C:\Windows\System32>fsutil dirty query c:
卷 - c: 没有损坏

C:\Windows\System32>
```

### 🧰 常用磁盘命令速览

**chkdsk**  
- 作用：检查并修复 NTFS/FAT32 文件系统的逻辑错误（如索引错乱、脏位标记）。  
- 关键参数：`/f`（修复）、`/i`（快速索引检查）、`/x`（强制卸载卷）。

---

**diskpart**  
- 作用：Windows 内置的磁盘分区命令行工具，可管理磁盘、卷、分区和格式。  
- 常用操作：`list volume`（列出所有卷）、`list disk`（列出物理磁盘）、`select`（选中对象）。

---

**fsutil**  
- 作用：直接操作 NTFS 底层细节，如查询卷脏位、调整文件系统行为。  
- 典型用法：`fsutil dirty query C:`（检查 C 盘是否标记为损坏）。

---

**chkntfs**  
- 作用：管理 Windows 开机时的自动磁盘检查，可排除或强制检查特定卷。  
- 典型用法：`chkntfs /x C:`（开机不检查 C 盘）。
